!function(e){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}(function(ae){"use strict";var ue="left",se="right",ce="up",pe="down",he="in",de="out",fe="none",ge="auto",we="swipe",ve="pinch",Te="tap",be="doubletap",Ee="longtap",Se="horizontal",me="vertical",ye="all",Oe=10,xe="start",Me="move",Pe="end",De="cancel",Le="ontouchstart"in window,Re=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,ke=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,Ae="TouchSwipe";function i(e,o){var n=Le||ke||!o.fallbackToMouseEvents,t=n?ke?Re?"MSPointerDown":"pointerdown":"touchstart":"mousedown",i=n?ke?Re?"MSPointerMove":"pointermove":"touchmove":"mousemove",r=n?ke?Re?"MSPointerUp":"pointerup":"touchend":"mouseup",l=n?null:"mouseleave",a=ke?Re?"MSPointerCancel":"pointercancel":"touchcancel",u=0,s=null,c=0,p=0,h=0,d=1,f=0,g=0,w=null,v=ae(e),T="start",b=0,E=null,S=0,m=0,y=0,O=0,x=0,M=null,P=null;try{v.bind(t,D),v.bind(a,k)}catch(e){ae.error("events not supported "+t+","+a+" on jQuery.swipe")}function D(e){if(!0!==v.data(Ae+"_intouch")&&!(0<ae(e.target).closest(o.excludedElements,v).length)){var n,t=e.originalEvent?e.originalEvent:e,i=Le?t.touches[0]:t;return T=xe,Le?b=t.touches.length:e.preventDefault(),g=s=null,d=1,f=h=p=c=u=0,E=function(){for(var e=[],n=0;n<=5;n++)e.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return e}(),w=function(){var e={};return e[ue]=ie(ue),e[se]=ie(se),e[ce]=ie(ce),e[pe]=ie(pe),e}(),J(),!Le||b===o.fingers||o.fingers===ye||X()?(ee(0,i),S=oe(),2==b&&(ee(1,t.touches[1]),p=h=le(E[0].start,E[1].start)),(o.swipeStatus||o.pinchStatus)&&(n=U(t,T))):n=!1,!1===n?(U(t,T=De),n):(o.hold&&(P=setTimeout(ae.proxy(function(){v.trigger("hold",[t.target]),o.hold&&(n=o.hold.call(v,t,t.target))},this),o.longTapThreshold)),$(!0),null)}}function L(e){var n=e.originalEvent?e.originalEvent:e;if(T!==Pe&&T!==De&&!K()){var t,i=ne(Le?n.touches[0]:n);if(m=oe(),Le&&(b=n.touches.length),o.hold&&clearTimeout(P),T=Me,2==b&&(0==p?(ee(1,n.touches[1]),p=h=le(E[0].start,E[1].start)):(ne(n.touches[1]),h=le(E[0].end,E[1].end),E[0].end,E[1].end,g=d<1?de:he),d=function(e,n){return(n/e*1).toFixed(2)}(p,h),f=Math.abs(p-h)),b===o.fingers||o.fingers===ye||!Le||X()){if(function(e,n){if(!1===o.preventDefaultEvents)return;if(o.allowPageScroll===fe)e.preventDefault();else{var t=o.allowPageScroll===ge;switch(n){case ue:(o.swipeLeft&&t||!t&&o.allowPageScroll!=Se)&&e.preventDefault();break;case se:(o.swipeRight&&t||!t&&o.allowPageScroll!=Se)&&e.preventDefault();break;case ce:(o.swipeUp&&t||!t&&o.allowPageScroll!=me)&&e.preventDefault();break;case pe:(o.swipeDown&&t||!t&&o.allowPageScroll!=me)&&e.preventDefault()}}}(e,s=function(e,n){var t=function(e,n){var t=e.x-n.x,i=n.y-e.y,r=Math.atan2(i,t),l=Math.round(180*r/Math.PI);l<0&&(l=360-Math.abs(l));return l}(e,n);return t<=45&&0<=t?ue:t<=360&&315<=t?ue:135<=t&&t<=225?se:45<t&&t<135?pe:ce}(i.start,i.end)),u=function(e,n){return Math.round(Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)))}(i.start,i.end),c=re(),function(e,n){n=Math.max(n,te(e)),w[e].distance=n}(s,u),(o.swipeStatus||o.pinchStatus)&&(t=U(n,T)),!o.triggerOnTouchEnd||o.triggerOnTouchLeave){var r=!0;if(o.triggerOnTouchLeave){var l=function(e){var n=(e=ae(e)).offset();return{left:n.left,right:n.left+e.outerWidth(),top:n.top,bottom:n.top+e.outerHeight()}}(this);r=function(e,n){return e.x>n.left&&e.x<n.right&&e.y>n.top&&e.y<n.bottom}(i.end,l)}!o.triggerOnTouchEnd&&r?T=N(Me):o.triggerOnTouchLeave&&!r&&(T=N(Pe)),T!=De&&T!=Pe||U(n,T)}}else U(n,T=De);!1===t&&U(n,T=De)}}function R(e){var n=e.originalEvent;return Le&&0<n.touches.length?(y=oe(),O=event.touches.length+1,!0):(K()&&(b=O),m=oe(),c=re(),_()||!j()?U(n,T=De):o.triggerOnTouchEnd||0==o.triggerOnTouchEnd&&T===Me?(e.preventDefault(),U(n,T=Pe)):!o.triggerOnTouchEnd&&G()?H(n,T=Pe,Te):T===Me&&U(n,T=De),$(!1),null)}function k(){h=p=S=m=b=0,d=1,J(),$(!1)}function A(e){var n=e.originalEvent;o.triggerOnTouchLeave&&U(n,T=N(Pe))}function I(){v.unbind(t,D),v.unbind(a,k),v.unbind(i,L),v.unbind(r,R),l&&v.unbind(l,A),$(!1)}function N(e){var n=e,t=Q(),i=j(),r=_();return!t||r?n=De:!i||e!=Me||o.triggerOnTouchEnd&&!o.triggerOnTouchLeave?!i&&e==Pe&&o.triggerOnTouchLeave&&(n=De):n=Pe,n}function U(e,n){var t=void 0;return F()||W()||Y()||X()?((F()||W())&&(t=H(e,n,we)),(Y()||X())&&!1!==t&&(t=H(e,n,ve))):B()&&Z()&&!1!==t?t=H(e,n,be):c>o.longTapThreshold&&u<Oe&&o.longTap&&!1!==t?t=H(e,n,Ee):1!==b&&Le||!(isNaN(u)||u<o.threshold)||!G()||!1===t||(t=H(e,n,Te)),n===De&&k(),n===Pe&&(Le?0==e.touches.length&&k():k()),t}function H(e,n,t){var i=void 0;if(t==we){if(v.trigger("swipeStatus",[n,s||null,u||0,c||0,b,E]),o.swipeStatus&&!1===(i=o.swipeStatus.call(v,e,n,s||null,u||0,c||0,b,E)))return!1;if(n==Pe&&q()){if(v.trigger("swipe",[s,u,c,b,E]),o.swipe&&!1===(i=o.swipe.call(v,e,s,u,c,b,E)))return!1;switch(s){case ue:v.trigger("swipeLeft",[s,u,c,b,E]),o.swipeLeft&&(i=o.swipeLeft.call(v,e,s,u,c,b,E));break;case se:v.trigger("swipeRight",[s,u,c,b,E]),o.swipeRight&&(i=o.swipeRight.call(v,e,s,u,c,b,E));break;case ce:v.trigger("swipeUp",[s,u,c,b,E]),o.swipeUp&&(i=o.swipeUp.call(v,e,s,u,c,b,E));break;case pe:v.trigger("swipeDown",[s,u,c,b,E]),o.swipeDown&&(i=o.swipeDown.call(v,e,s,u,c,b,E))}}}if(t==ve){if(v.trigger("pinchStatus",[n,g||null,f||0,c||0,b,d,E]),o.pinchStatus&&!1===(i=o.pinchStatus.call(v,e,n,g||null,f||0,c||0,b,d,E)))return!1;if(n==Pe&&C())switch(g){case he:v.trigger("pinchIn",[g||null,f||0,c||0,b,d,E]),o.pinchIn&&(i=o.pinchIn.call(v,e,g||null,f||0,c||0,b,d,E));break;case de:v.trigger("pinchOut",[g||null,f||0,c||0,b,d,E]),o.pinchOut&&(i=o.pinchOut.call(v,e,g||null,f||0,c||0,b,d,E))}}return t==Te?n!==De&&n!==Pe||(clearTimeout(M),clearTimeout(P),Z()&&!B()?(x=oe(),M=setTimeout(ae.proxy(function(){x=null,v.trigger("tap",[e.target]),o.tap&&(i=o.tap.call(v,e,e.target))},this),o.doubleTapThreshold)):(x=null,v.trigger("tap",[e.target]),o.tap&&(i=o.tap.call(v,e,e.target)))):t==be?n!==De&&n!==Pe||(clearTimeout(M),x=null,v.trigger("doubletap",[e.target]),o.doubleTap&&(i=o.doubleTap.call(v,e,e.target))):t==Ee&&(n!==De&&n!==Pe||(clearTimeout(M),x=null,v.trigger("longtap",[e.target]),o.longTap&&(i=o.longTap.call(v,e,e.target)))),i}function j(){var e=!0;return null!==o.threshold&&(e=u>=o.threshold),e}function _(){var e=!1;return null!==o.cancelThreshold&&null!==s&&(e=te(s)-u>=o.cancelThreshold),e}function Q(){return!o.maxTimeThreshold||!(c>=o.maxTimeThreshold)}function C(){var e=V(),n=z(),t=null===o.pinchThreshold||f>=o.pinchThreshold;return e&&n&&t}function X(){return!!(o.pinchStatus||o.pinchIn||o.pinchOut)}function Y(){return!(!C()||!X())}function q(){var e=Q(),n=j(),t=V(),i=z();return!_()&&i&&t&&n&&e}function W(){return!!(o.swipe||o.swipeStatus||o.swipeLeft||o.swipeRight||o.swipeUp||o.swipeDown)}function F(){return!(!q()||!W())}function V(){return b===o.fingers||o.fingers===ye||!Le}function z(){return 0!==E[0].end.x}function G(){return!!o.tap}function Z(){return!!o.doubleTap}function B(){if(null==x)return!1;var e=oe();return Z()&&e-x<=o.doubleTapThreshold}function J(){O=y=0}function K(){var e=!1;y&&oe()-y<=o.fingerReleaseThreshold&&(e=!0);return e}function $(e){!0===e?(v.bind(i,L),v.bind(r,R),l&&v.bind(l,A)):(v.unbind(i,L,!1),v.unbind(r,R,!1),l&&v.unbind(l,A,!1)),v.data(Ae+"_intouch",!0===e)}function ee(e,n){var t=void 0!==n.identifier?n.identifier:0;return E[e].identifier=t,E[e].start.x=E[e].end.x=n.pageX||n.clientX,E[e].start.y=E[e].end.y=n.pageY||n.clientY,E[e]}function ne(e){var n=function(e){for(var n=0;n<E.length;n++)if(E[n].identifier==e)return E[n]}(void 0!==e.identifier?e.identifier:0);return n.end.x=e.pageX||e.clientX,n.end.y=e.pageY||e.clientY,n}function te(e){if(w[e])return w[e].distance}function ie(e){return{direction:e,distance:0}}function re(){return m-S}function le(e,n){var t=Math.abs(e.x-n.x),i=Math.abs(e.y-n.y);return Math.round(Math.sqrt(t*t+i*i))}function oe(){return(new Date).getTime()}this.enable=function(){return v.bind(t,D),v.bind(a,k),v},this.disable=function(){return I(),v},this.destroy=function(){I(),v.data(Ae,null),v=null},this.option=function(e,n){if(void 0!==o[e]){if(void 0===n)return o[e];o[e]=n}else ae.error("Option "+e+" does not exist on jQuery.swipe.options");return null}}ae.fn.swipe=function(e){var n=ae(this),t=n.data(Ae);if(t&&"string"==typeof e){if(t[e])return t[e].apply(this,Array.prototype.slice.call(arguments,1));ae.error("Method "+e+" does not exist on jQuery.swipe")}else if(!(t||"object"!=typeof e&&e))return function(t){!t||void 0!==t.allowPageScroll||void 0===t.swipe&&void 0===t.swipeStatus||(t.allowPageScroll=fe);void 0!==t.click&&void 0===t.tap&&(t.tap=t.click);t=t||{};return t=ae.extend({},ae.fn.swipe.defaults,t),this.each(function(){var e=ae(this),n=e.data(Ae);n||(n=new i(this,t),e.data(Ae,n))})}.apply(this,arguments);return n},ae.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0},ae.fn.swipe.phases={PHASE_START:xe,PHASE_MOVE:Me,PHASE_END:Pe,PHASE_CANCEL:De},ae.fn.swipe.directions={LEFT:ue,RIGHT:se,UP:ce,DOWN:pe,IN:he,OUT:de},ae.fn.swipe.pageScroll={NONE:fe,HORIZONTAL:Se,VERTICAL:me,AUTO:ge},ae.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:ye}});